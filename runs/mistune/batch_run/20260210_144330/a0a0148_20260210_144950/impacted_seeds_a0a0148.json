{
  "commit": "a0a0148",
  "parent": "c85632528f6f3d9d974bfae300716ac997a8d2c1",
  "repo": "D:\\locbench\\mistune",
  "num_files_in_diff": 5,
  "num_py_files_in_diff": 2,
  "num_seeds": 3,
  "seeds": [
    {
      "path": "src/mistune/directives/toc.py",
      "version": "new",
      "line": 76,
      "kind": "function",
      "qualname": "src.mistune.directives.toc.TableOfContents.toc_hook",
      "span": [
        61,
        82
      ],
      "reason": "diff_new_line_in_def",
      "is_test": false,
      "seed_type": "code_change",
      "new_code": "    def toc_hook(self, md: \"Markdown\", state: \"BlockState\") -> None:\n        sections = []\n        headings = []\n\n        for tok in state.tokens:\n            if tok[\"type\"] == \"toc\":\n                sections.append(tok)\n            elif tok[\"type\"] == \"heading\":\n                headings.append(tok)\n\n        if sections:\n            toc_items = []\n            # adding ID for each heading\n            for i, tok in enumerate(headings):\n                tok[\"attrs\"][\"id\"] = self.generate_heading_id(tok, i)\n                toc_items.append(normalize_toc_item(md, tok, parent=state))\n\n            for sec in sections:\n                _min = sec[\"attrs\"][\"min_level\"]\n                _max = sec[\"attrs\"][\"max_level\"]\n                toc = [item for item in toc_items if _min <= item[0] <= _max]\n                sec[\"attrs\"][\"toc\"] = toc",
      "old_code": "    def toc_hook(self, md: \"Markdown\", state: \"BlockState\") -> None:\n        sections = []\n        headings = []\n\n        for tok in state.tokens:\n            if tok[\"type\"] == \"toc\":\n                sections.append(tok)\n            elif tok[\"type\"] == \"heading\":\n                headings.append(tok)\n\n        if sections:\n            toc_items = []\n            # adding ID for each heading\n            for i, tok in enumerate(headings):\n                tok[\"attrs\"][\"id\"] = self.generate_heading_id(tok, i)\n                toc_items.append(normalize_toc_item(md, tok))\n\n            for sec in sections:\n                _min = sec[\"attrs\"][\"min_level\"]\n                _max = sec[\"attrs\"][\"max_level\"]\n                toc = [item for item in toc_items if _min <= item[0] <= _max]\n                sec[\"attrs\"][\"toc\"] = toc"
    },
    {
      "path": "src/mistune/toc.py",
      "version": "new",
      "line": 51,
      "kind": "function",
      "qualname": "src.mistune.toc.add_toc_hook.toc_hook",
      "span": [
        39,
        54
      ],
      "reason": "diff_new_line_in_def",
      "is_test": false,
      "seed_type": "code_change",
      "new_code": "    def toc_hook(md: \"Markdown\", state: \"BlockState\") -> None:\n        headings = []\n\n        for tok in state.tokens:\n            if tok[\"type\"] == \"heading\":\n                level = tok[\"attrs\"][\"level\"]\n                if min_level <= level <= max_level:\n                    headings.append(tok)\n\n        toc_items = []\n        for i, tok in enumerate(headings):\n            tok[\"attrs\"][\"id\"] = heading_id(tok, i)\n            toc_items.append(normalize_toc_item(md, tok, parent=state))\n\n        # save items into state\n        state.env[\"toc_items\"] = toc_items",
      "old_code": "    def toc_hook(md: \"Markdown\", state: \"BlockState\") -> None:\n        headings = []\n\n        for tok in state.tokens:\n            if tok[\"type\"] == \"heading\":\n                level = tok[\"attrs\"][\"level\"]\n                if min_level <= level <= max_level:\n                    headings.append(tok)\n\n        toc_items = []\n        for i, tok in enumerate(headings):\n            tok[\"attrs\"][\"id\"] = heading_id(tok, i)\n            toc_items.append(normalize_toc_item(md, tok))\n\n        # save items into state\n        state.env[\"toc_items\"] = toc_items"
    },
    {
      "path": "src/mistune/toc.py",
      "version": "new",
      "line": 59,
      "kind": "function",
      "qualname": "src.mistune.toc.normalize_toc_item",
      "span": [
        59,
        66
      ],
      "reason": "diff_new_line_in_def",
      "is_test": false,
      "seed_type": "code_change",
      "new_code": "def normalize_toc_item(md: \"Markdown\", token: Dict[str, Any], parent: Optional[Any] = None) -> Tuple[int, str, str]:\n    text = token[\"text\"]\n    tokens = md.inline(text, parent.env if parent else {})\n    assert md.renderer is not None\n    html = md.renderer(tokens, BlockState())\n    text = striptags(html)\n    attrs = token[\"attrs\"]\n    return attrs[\"level\"], attrs[\"id\"], text",
      "old_code": "def normalize_toc_item(md: \"Markdown\", token: Dict[str, Any]) -> Tuple[int, str, str]:\n    text = token[\"text\"]\n    tokens = md.inline(text, {})\n    assert md.renderer is not None\n    html = md.renderer(tokens, BlockState())\n    text = striptags(html)\n    attrs = token[\"attrs\"]\n    return attrs[\"level\"], attrs[\"id\"], text"
    }
  ],
  "generated_at": "2026-02-10T14:49:51"
}