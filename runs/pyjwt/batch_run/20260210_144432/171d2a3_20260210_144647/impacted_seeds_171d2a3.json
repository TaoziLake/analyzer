{
  "commit": "171d2a3",
  "parent": "697344d25990641b8b2aa85f0a60634b590b5702",
  "repo": "D:\\locbench\\pyjwt",
  "num_files_in_diff": 4,
  "num_py_files_in_diff": 1,
  "num_seeds": 1,
  "seeds": [
    {
      "path": "jwt/jwks_client.py",
      "version": "new",
      "line": 28,
      "kind": "function",
      "qualname": "jwt.jwks_client.PyJWKClient.__init__",
      "span": [
        17,
        93
      ],
      "reason": "diff_new_line_in_def",
      "is_test": false,
      "seed_type": "code_change",
      "new_code": "    def __init__(\n        self,\n        uri: str,\n        cache_keys: bool = False,\n        max_cached_keys: int = 16,\n        cache_jwk_set: bool = True,\n        lifespan: float = 300,\n        headers: dict[str, Any] | None = None,\n        timeout: float = 30,\n        ssl_context: SSLContext | None = None,\n    ):\n        \"\"\"A client for retrieving signing keys from a JWKS endpoint.\n\n        ``PyJWKClient`` uses a two-tier caching system to avoid unnecessary\n        network requests:\n\n        **Tier 1 — JWK Set cache** (enabled by default):\n        Caches the entire JSON Web Key Set response from the endpoint.\n        Controlled by:\n\n        - ``cache_jwk_set``: Set to ``True`` (the default) to enable this\n          cache. When enabled, the JWK Set is fetched from the network only\n          when the cache is empty or expired.\n        - ``lifespan``: Time in seconds before the cached JWK Set expires.\n          Defaults to ``300`` (5 minutes). Must be greater than 0.\n\n        **Tier 2 — Signing key cache** (disabled by default):\n        Caches individual signing keys (looked up by ``kid``) using an LRU\n        cache with **no time-based expiration**. Keys are evicted only when\n        the cache reaches its maximum size. Controlled by:\n\n        - ``cache_keys``: Set to ``True`` to enable this cache.\n          Defaults to ``False``.\n        - ``max_cached_keys``: Maximum number of signing keys to keep in\n          the LRU cache. Defaults to ``16``.\n\n        :param uri: The URL of the JWKS endpoint.\n        :type uri: str\n        :param cache_keys: Enable the per-key LRU cache (Tier 2).\n        :type cache_keys: bool\n        :param max_cached_keys: Max entries in the signing key LRU cache.\n        :type max_cached_keys: int\n        :param cache_jwk_set: Enable the JWK Set response cache (Tier 1).\n        :type cache_jwk_set: bool\n        :param lifespan: TTL in seconds for the JWK Set cache.\n        :type lifespan: float\n        :param headers: Optional HTTP headers to include in requests.\n        :type headers: dict or None\n        :param timeout: HTTP request timeout in seconds.\n        :type timeout: float\n        :param ssl_context: Optional SSL context for the request.\n        :type ssl_context: ssl.SSLContext or None\n        \"\"\"\n        if headers is None:\n            headers = {}\n        self.uri = uri\n        self.jwk_set_cache: JWKSetCache | None = None\n        self.headers = headers\n        self.timeout = timeout\n        self.ssl_context = ssl_context\n\n        if cache_jwk_set:\n            # Init jwt set cache with default or given lifespan.\n            # Default lifespan is 300 seconds (5 minutes).\n            if lifespan <= 0:\n                raise PyJWKClientError(\n                    f'Lifespan must be greater than 0, the input is \"{lifespan}\"'\n                )\n            self.jwk_set_cache = JWKSetCache(lifespan)\n        else:\n            self.jwk_set_cache = None\n\n        if cache_keys:\n            # Cache signing keys\n            get_signing_key = lru_cache(maxsize=max_cached_keys)(self.get_signing_key)\n            # Ignore mypy (https://github.com/python/mypy/issues/2427)\n            self.get_signing_key = get_signing_key  # type: ignore[method-assign]",
      "old_code": "    def __init__(\n        self,\n        uri: str,\n        cache_keys: bool = False,\n        max_cached_keys: int = 16,\n        cache_jwk_set: bool = True,\n        lifespan: float = 300,\n        headers: dict[str, Any] | None = None,\n        timeout: float = 30,\n        ssl_context: SSLContext | None = None,\n    ):\n        if headers is None:\n            headers = {}\n        self.uri = uri\n        self.jwk_set_cache: JWKSetCache | None = None\n        self.headers = headers\n        self.timeout = timeout\n        self.ssl_context = ssl_context\n\n        if cache_jwk_set:\n            # Init jwt set cache with default or given lifespan.\n            # Default lifespan is 300 seconds (5 minutes).\n            if lifespan <= 0:\n                raise PyJWKClientError(\n                    f'Lifespan must be greater than 0, the input is \"{lifespan}\"'\n                )\n            self.jwk_set_cache = JWKSetCache(lifespan)\n        else:\n            self.jwk_set_cache = None\n\n        if cache_keys:\n            # Cache signing keys\n            get_signing_key = lru_cache(maxsize=max_cached_keys)(self.get_signing_key)\n            # Ignore mypy (https://github.com/python/mypy/issues/2427)\n            self.get_signing_key = get_signing_key  # type: ignore[method-assign]"
    }
  ],
  "generated_at": "2026-02-10T14:46:47"
}